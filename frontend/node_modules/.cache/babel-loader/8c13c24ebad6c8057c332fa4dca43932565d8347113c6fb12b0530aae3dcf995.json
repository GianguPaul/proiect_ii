{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul\\\\Documents\\\\GitHub\\\\proiect_ii\\\\frontend\\\\src\\\\pages\\\\Orders.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/Orders.js\n\nimport { useEffect, useState } from \"react\";\nimport { getOrdersByUser, createOrder, deleteOrder } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Orders({\n  cart,\n  setCart,\n  user\n}) {\n  _s();\n  const [orders, setOrders] = useState([]);\n\n  // Încarcă comenzile existente ale utilizatorului\n  const fetchOrders = async () => {\n    try {\n      const res = await getOrdersByUser(user.id);\n      setOrders(res.data);\n    } catch (err) {\n      console.error(\"Eroare la preluarea comenzilor:\", err);\n    }\n  };\n  useEffect(() => {\n    fetchOrders();\n  }, [user.id]);\n\n  // Trimite o nouă comandă\n  const checkout = async () => {\n    if (cart.length === 0) return;\n    try {\n      await createOrder({\n        deliveryAddress: user.address,\n        items: cart\n      });\n      setCart([]);\n      fetchOrders();\n    } catch (err) {\n      console.error(\"Eroare la crearea comenzii:\", err);\n    }\n  };\n\n  // Șterge o comandă existentă\n  const removeOrder = async orderId => {\n    try {\n      await deleteOrder(orderId);\n      setOrders(prev => prev.filter(o => o.OrderId !== orderId));\n    } catch (err) {\n      console.error(\"Eroare la ștergerea comenzii:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Co\\u0219\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), cart.map((it, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [it.Name, \" x\", it.quantity]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: checkout,\n      disabled: cart.length === 0,\n      children: \"Trimite comand\\u0103\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Comenzi existente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), orders.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Nu ai comenzi.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 31\n    }, this), orders.map(o => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #ddd\",\n        margin: \"5px\",\n        padding: \"5px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"ID: \", o.OrderId, \" | Status: \", o.Status, \" | Total: \", o.TotalPrice, \" lei\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Items:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: o.items.map(it => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Produs \", it.ProductId, \" x\", it.Quantity]\n        }, it.ItemId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => removeOrder(o.OrderId),\n        children: \"\\u0218terge comanda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)]\n    }, o.OrderId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(Orders, \"FvMuVccH6DXI6fqfhJiN/VsjZaw=\");\n_c = Orders;\nvar _c;\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"names":["useEffect","useState","getOrdersByUser","createOrder","deleteOrder","jsxDEV","_jsxDEV","Orders","cart","setCart","user","_s","orders","setOrders","fetchOrders","res","id","data","err","console","error","checkout","length","deliveryAddress","address","items","removeOrder","orderId","prev","filter","o","OrderId","children","fileName","_jsxFileName","lineNumber","columnNumber","map","it","i","Name","quantity","onClick","disabled","style","border","margin","padding","Status","TotalPrice","ProductId","Quantity","ItemId","_c","$RefreshReg$"],"sources":["C:/Users/Paul/Documents/GitHub/proiect_ii/frontend/src/pages/Orders.js"],"sourcesContent":["// frontend/src/pages/Orders.js\n\nimport { useEffect, useState } from \"react\";\nimport {\n  getOrdersByUser,\n  createOrder,\n  deleteOrder\n} from \"../services/api\";\n\nexport default function Orders({ cart, setCart, user }) {\n  const [orders, setOrders] = useState([]);\n\n  // Încarcă comenzile existente ale utilizatorului\n  const fetchOrders = async () => {\n    try {\n      const res = await getOrdersByUser(user.id);\n      setOrders(res.data);\n    } catch (err) {\n      console.error(\"Eroare la preluarea comenzilor:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, [user.id]);\n\n  // Trimite o nouă comandă\n  const checkout = async () => {\n    if (cart.length === 0) return;\n    try {\n      await createOrder({ deliveryAddress: user.address, items: cart });\n      setCart([]);\n      fetchOrders();\n    } catch (err) {\n      console.error(\"Eroare la crearea comenzii:\", err);\n    }\n  };\n\n  // Șterge o comandă existentă\n  const removeOrder = async (orderId) => {\n    try {\n      await deleteOrder(orderId);\n      setOrders((prev) => prev.filter(o => o.OrderId !== orderId));\n    } catch (err) {\n      console.error(\"Eroare la ștergerea comenzii:\", err);\n    }\n  };\n\n  return (\n    <div>\n      <h3>Coș</h3>\n      {cart.map((it, i) => (\n        <div key={i}>\n          {it.Name} x{it.quantity}\n        </div>\n      ))}\n      <button onClick={checkout} disabled={cart.length === 0}>\n        Trimite comandă\n      </button>\n\n      <h3>Comenzi existente</h3>\n      {orders.length === 0 && <p>Nu ai comenzi.</p>}\n      {orders.map(o => (\n        <div\n          key={o.OrderId}\n          style={{ border: \"1px solid #ddd\", margin: \"5px\", padding: \"5px\" }}\n        >\n          <p>\n            ID: {o.OrderId} | Status: {o.Status} | Total: {o.TotalPrice} lei\n          </p>\n          <p>Items:</p>\n          <ul>\n            {o.items.map(it => (\n              <li key={it.ItemId}>\n                Produs {it.ProductId} x{it.Quantity}\n              </li>\n            ))}\n          </ul>\n          <button onClick={() => removeOrder(o.OrderId)}>\n            Șterge comanda\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}